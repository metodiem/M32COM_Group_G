@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="~/Scripts/jquery-3.3.1.js" type="text/javascript"></script>

@{
    ViewBag.Title = "Teams";
}
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-6">

            <h2 id="teamName"></h2>
            <dl>
                <dt>Members:</dt>
                <dd><p id="name"></p></dd>
            </dl>

            <div class="form-group">
                <label for="email">Invite someone to join your team:</label>
                <input type="text" placeholder="Email" class="form-control" id="email">
                <button onclick="sendRequest()">Add</button>
                <p id="invite"></p>
            </div>

        </div>
        <div class="col-lg-6">
            <h2>Boat</h2>
            <div id="mdl">
                <div class="model-form">
                    <label for="email">Add one now:</label>
                    <input type="text" placeholder="model" class="form-control" id="model">

                    <input type="text" placeholder="year" class="form-control" id="year">
                    <button onclick="sendRequestBoat()">Add</button>

                </div>

            </div>
            <p id="boatstatus"></p>
        </div>
    </div>
</div>



<script>
    token = "Bearer 17TvO1HtutHsLDx6wHX7r51rbIPu8fYk99xQYHDGSILN2pSnBLC8U5a42SbQ1htPDpfBuM6f6FN2bwcK8iLU5uH33T9nHmGKpcmWWUmKWKp+BcZUJsXGUbCfamrRaLC0Iq2olsbS4TjxqKyA3MbYzG5VXV5bNRXq01JkeEvDhEimULRPwCS3eJQ7sbez0Dbo5Pwh6iuWDcRFAwK0Tjv9uxdXA/3fgkxIdJM26IETix87K7jROYUlIFjAuvsl4yhq";
    $.ajax({
        url: 'http://localhost:52082/api/team/members',
        type: 'GET',
        headers: { "Authorization": token },
        dataType: 'json',
        success: function (data, textStatus, xhr) {
            console.log(data);
            var usr = data.result;
            console.log(usr[0]);
            $("#name").text(usr[0].name + " " + usr[0].surname);
            $("#teamName").text(usr[0].teamName);
        },
        error: function (xhr, textStatus, errorThrown) {
            console.log('Error in Operation');
        }
    });
</script>

<script>
    function sendRequest() {
        var email = {
            email : document.getElementById("email").value
        }
        var jsonText = JSON.stringify(email);

        console.log(jsonText);
        token = "Bearer tiglaecOjPNyUH6UFeTA0lssKlK4qp5Uu5muQRLX4i2BR3gW3UvQACi1JPz6Qe26ni1iFyDv7MNfVpRZwmMCbTFuxZznlms3htJuf7LR7KzEi/P0zXnNE4ysALUpipsCGXZEnWu1VuccYM7o7oqdAwm8NiUHDYaoIVCWXKuyYYpuTefPmvjncCDRM0L3j3Nbf9/UpfaS/te8gNh7wVghAQ==";
        $.ajax({
            url: 'http://localhost:52082/api/team/invite',
            type: 'POST',
            headers: { "Authorization": token  },
            contentType: 'application/json',
            data: jsonText,
            processData: false,
            dataType: 'json',
            success: function (data, textStatus, xhr) {
                console.log(data);
                var invite = data.message;
                console.log(invite);
                document.getElementById("invite").innerHTML = invite;

            },
            error: function (xhr, textStatus, errorThrown) {
                console.log('Error in Operation');
            }
        });
    }
</script>

<script>
    function sendRequestBoat() {
        var boat = {
            model: document.getElementById("model").value,
            year: document.getElementById("year").value

        }
        var jsonText = JSON.stringify(boat);
        console.log(jsonText);
        var divform = document.getElementById("mdl");
        token = "Bearer tiglaecOjPNyUH6UFeTA0lssKlK4qp5Uu5muQRLX4i2BR3gW3UvQACi1JPz6Qe26ni1iFyDv7MNfVpRZwmMCbTFuxZznlms3htJuf7LR7KzEi/P0zXnNE4ysALUpipsCGXZEnWu1VuccYM7o7oqdAwm8NiUHDYaoIVCWXKuyYYpuTefPmvjncCDRM0L3j3Nbf9/UpfaS/te8gNh7wVghAQ==";
        $.ajax({
            url: 'http://localhost:52082/api/team/addboat',
            type: 'POST',
            headers: { "Authorization": token },
            contentType: 'application/json',
            data: jsonText,
            processData: false,
            dataType: 'json',
            complete: function (data, textStatus, xhr) {
                var bt = data.responseJSON;
                console.log(data);
                console.log(bt.hasError);
                document.getElementById("boatstatus").innerHTML = bt.message;
                if (bt.hasError == false) {
                    divform.style.display = 'none';


                }
            },
            error: function (xhr, textStatus, errorThrown) {
                console.log('Error in Operation');
            }
        });
    }
</script>
